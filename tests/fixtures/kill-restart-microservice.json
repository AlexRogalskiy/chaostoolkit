{
    "title": "Kill a microservice",
    "description": "Killing a microservice will trigger service failure",
    "target-layers": {
        "platforms": [
            { "key": "noop" }
        ]
    },
    "method": [
        {
            "title": "Checking our system is healthy",
            "probes": {
                "steady": {
                    "layer": "noop",
                    "name": "microservices-all-healthy"
                }
            }
        },
        {
            "title": "Killing a service abruptly",
            "action": {
                "layer": "noop",
                "name": "kill-microservice",
                "parameters": {
                    "name": "cherrypy-webapp"
                },
                "pauses": {
                    "after": 5
                }
            },
            "probes": {
                "steady": {
                    "layer": "noop",
                    "name": "microservice-available-and-healthy",
                    "parameters": {
                        "name": "cherrypy-webapp"
                    }
                },
                "close": {
                    "layer": "noop",
                    "name": "microservice-is-not-available",
                    "parameters": {
                        "name": "cherrypy-webapp"
                    }
                }
            }
        },
        {
            "title": "Start a microservice",
            "action": {
                "layer": "noop",
                "name": "start-microservice",
                "parameters": {
                    "config-path": "/home/sylvain/dev/oss/weavcfg/cherrypy-webapp.json"
                },
                "pauses": {
                    "after": 5
                }
            },
            "probes": {
                "steady": {
                    "layer": "noop",
                    "name": "microservice-is-not-available",
                    "parameters": {
                        "name": "cherrypy-webapp"
                    }
                },
                "close": {
                    "layer": "noop",
                    "name": "microservice-available-and-healthy",
                    "parameters": {
                        "name": "cherrypy-webapp"
                    }
                }
            }
        },
        {
            "title": "Checking our system is healthy once microservice has been restarted",
            "probes": {
                "steady": {
                    "layer": "noop",
                    "name": "microservices-all-healthy"
                }
            }
        }
    ]
}